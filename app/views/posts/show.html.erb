<%= turbo_stream_from @post.comments_channel %>

<div class='row'>
  <h3><%= @post.title %></h3>
  <small><p><%= datetime_signature_s(@post)%> </p></small>
</div>

<div class='row border rounded p-5'>
  <%= simple_format @post.body %>

  <div class='mt-3 d-flex flex-row-reverse'>
    <%= link_to 'Edit', [:edit, @post.blog, @post], class: 'btn btn-primary' %>
    <%= link_to 'Delete', [@post.blog, @post], method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure?' } %>
  </div>
</div>


<div class='row'>
  <%= turbo_frame_tag :comments_form do %>
    <%= form_for [@post.blog, @post, Comment.new] do |f| %>
      <%= f.label :body %>
      <%= f.text_area :body %>

      <%= f.submit %>
    <% end %>
  <% end %>

  <%= turbo_frame_tag @post.comments_channel do %>
    <%= render @post.comments.order(:created_at) %>
  <% end %>
</div>